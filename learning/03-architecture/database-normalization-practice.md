# 資料庫正規化實務：從 Excel 思維轉向關聯式架構

## 📌 背景
在 P-05/P-08 報價系統中，我們面臨將混亂的 Excel 轉換為資料庫的過程。非技術人員常認為「放在一張表最快」，但這會導致更新導常與資料不一致。

## 🔍 正規化實踐案例

### 1. 「人」與「企業」的解耦 (Decoupling)
- **問題**：客戶 A 在 甲公司任職。若直接存為一筆，當 A 跳槽到 乙公司時，歷史報價單的公司欄位會出錯。
- **解法**：建立 `Customers` 表與 `Companies` 表，中間透過關聯。這能追蹤「人的跳槽」而不破壞「歷史報價歸屬」。

### 2. 「建案」與「地址」的模組化
- **問題**：同一個建案有多層樓、多個服務項目。重複存地址會造成資料臃腫。
- **解法**：將 `Projects` 設為父表，地址與基本資訊存於此。服務項目 (Services) 作為子表關聯 Primary Key。

## ⚙️ 為什麼「只看眼前」是資料庫設計的大忌？
1. **資料冗餘 (Redundancy)**：同樣的資訊存 10 次，修改時漏掉一次就導致系統數據打結。
2. **擴展性低下**：未來要增加「業務獎金分成」或「工程進度追蹤」時，扁平表將無法連結新需求。
3. **技術債爆炸**：現在省下的「想遠一點」的時間，未來會以「系統推倒重啟」的昂貴代價償還。

## 💡 給自己的提醒
老闆覺得「建資料庫跟建資料夾一樣簡單」，這正是展現「架構師競爭力」的時刻：
- 不要解釋術語，要解釋**「未來的修改災難」**。
- 即使被催促，也要在底層保持 `One Fact in One Place` 的原則。

---
> **心法**：資料庫是土木工程，地基打歪，上面再漂亮的 UI 也會塌掉。
