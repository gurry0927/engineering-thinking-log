# 系統架構決策：為什麼選擇 GAS 中繼層而非直連工具？

## 📌 案例分析：Jotform 直連 kintone vs GAS Middleware

### ❌ 方案 A：直連 (Direct Sync)
- **優勢**：快速、No-code、初期開發成本極低。
- **風險**：
    - **黑箱運作**：一旦掉鍊子（連線失敗），資料直接遺失，無法追蹤。
    - **靈活性差**：無法處理複雜的「資料清洗」與「模糊匹配」。
    - **無狀態感**：不具備 retry 或狀態紀錄能力。

### ✅ 方案 B：中繼層 (Middleware / GAS)
- **優勢**：
    - **高靈活性**：可自由攔截資料進行 Regex 判斷、跨多個資料來源比對。
    - **故障隔離**：資料先進入 GAS / Sheets 緩衝，即使寫入 kintone 失敗，原始資料仍在。
    - **自定義標記**：可設計「疑似新客戶」標示，將不確定性轉給人工判斷，而非直接拋出錯誤。
- **代價**：開發時間較長，需要考慮較多異常處理。

## 🔍 工程思維的選擇
當流程涉及「公司核心財產（報價/金流）」時，**「可靠性」的權重應遠高於「開發速度」**。
- **Jotform 直連** 適合：一次性問卷、非核心收集。
- **GAS 中繼管線** 適合：企業級正規流程、需要稽核軌跡 (Audit Trail) 的任務。

## 💡 學習反思
同事提出直連是為了「快」，而我推翻它是為了「穩」。這種**「為了未來不爆炸而選擇難走的路」**的精神，正是系統工程師的核心競爭力。

---
> **結語**：Middleware 雖然增加了開發複雜度，但它買下了「災難發生時的保險」。
