# 資料工程基礎：如何將「亂七八糟」的資料結構化？

## 📌 問題場景
在 P-06 (業務獎金系統) 中，資料來源主要由不同部門的人工維護。因為缺乏統一標準，產生了以下問題：
- **異構排列**：有人習慣橫向 (Columns) 擴充資料，有人喜歡縱向 (Rows) 堆疊。
- **拼寫不一致**：對同一個案件或負責人的名稱錄入不統一。
- **重複與遺漏**：多人同時維護一份表單時，容易產生重疊紀錄。

## 🛠️ 資料清洗與整合策略

### 1. 建立「唯一索引 (Anchor Key)」
- **策略**：強制使用「案號」作為所有資料表的唯一關聯 Key。
- **實作**：如果案號遺失或格式錯誤，系統自動記錄並標註為待修復，不進入後續計算。

### 2. 模式識別 (Pattern Matching)
- **橫轉縱 (Melt)**：針對習慣橫向擴充的表格，先將其逆轉置 (Unpivot) 為縱向格式，方便統一使用 SQL-like 的方式搜尋。
- **嚴格過濾**：使用邏輯排除法，過濾掉無意義的註解行或空白行。

### 3. 自動同步與即時更新
- **Trigger 機制**：透過 GAS 的時間觸發或修改觸發，將資料從來源表「抽取 (Extract)」並「載入 (Load)」到一個中間層 (Staging Area)，在那裡完成清洗後再匯出結果。

## 💡 核心體會
真正的資料工程師 80% 的時間都在做「髒活（資料清洗）」。能在大公司運行的穩健系統，其核心不在於複雜的演算法，而是在於對「髒資料」的處理能力與容錯機制。
